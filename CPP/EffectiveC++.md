# EffectiveC++

## ch01 让自己习惯C++

### 条款1：将C++看做一个语言联邦

简单来讲，`C++`就是`C` + `Object-Oriented C++ ` + `Template C++` + `STL`

一个细节：内置的类型（即C-like）而言，值传递比引用传递更快，因为其他类型大多都是类，而类存在构造函数和析构函数

特例是迭代器和函数对象，因为他们本质上是在C指针上塑造出来的，所以他们值传递也很快。

### 条款2：尽量会使用const，enum，inline代替#define

简单来讲，尽量让编译器替换预处理器。原因是编译器考虑的更多，不管是对比预处理器还是用户。

使用宏定义的缺点，出来常见的原因（意外的执行顺序，意外的语句拼接等），还有一点是调试时候，宏定义是没有符号标记的。

注意，该条款中推荐的enum hack技术（enum当做int使用）与新的C++标准背道而驰，不要使用。更推荐使用`enum class`,相对来说类型更安全，代码更清晰。但是enum当做一个int使用模板元编程中是一个基础技术。

对于宏函数，如果语句不是特别复杂，直接使用inline函数进行替换，并不会影响程序的开销。

### 条款3：尽可能的使用const

在确定某些情况数据或者变量不能进行改变的时候，就使用const，包括变量，成员函数等等。

在使用的时候，要注意自己设定的const是否真的和预期一样。比如，定义一个const成员函数，希望的是，在该函数内不会对任何成员数据发生改变。这时候要注意，const成员函数内是否存在指针，访问运算符等形式，将本不应该改变的数据“偷偷”传了出去。术语来讲，就是要注意bitwise const和logical const的区别。

另外一点，在C++中，如果想改变某些const变量的值，可以使用关键字mutable来去除bitwise const

在定义成员函数的时候，有限提供const版本，在大多数情况下，如果确定logical const，那么一个const成员函数足够使用，不需要再提供非const版本的成员函数

如果同时需要两个版本，可以使用const_cast去除const属性，以此来解决代码重复和代码膨胀的问题。《ProfessionalC++V5》



